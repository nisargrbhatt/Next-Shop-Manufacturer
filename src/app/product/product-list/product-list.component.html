<div class="hero">
  <div class="hero-data">
    <div class="hero-data-bar">
      <div class="hero-data-bar-filter">
        <mat-form-field appearance="outline">
          <mat-label> Filter </mat-label>
          <mat-select
            [(ngModel)]="filterValue"
            (selectionChange)="onFilterChange($event)"
            placeholder="Filter"
          >
            <mat-option value="Pending">Pending</mat-option>
            <mat-option value="Approved">Approved</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="hero-data-bar-create">
        <mat-form-field appearance="outline">
          <button matPrefix mat-icon-button>
            <mat-icon style="color: white">search</mat-icon>
          </button>
          <mat-label>Search</mat-label>
          <input
            type="text"
            matInput
            [(ngModel)]="searchText"
            placeholder="Search"
            (keyup)="
              filterValue === 'Pending'
                ? getPendingProductApprovals()
                : getApprovedProducts()
            "
            style="color: white"
          />
          <button
            matSuffix
            mat-button
            (click)="
              searchText = '';
              filterValue === 'Pending'
                ? getPendingProductApprovals()
                : getApprovedProducts()
            "
            *ngIf="searchText.length > 0"
          >
            <mat-icon style="color: white">close</mat-icon>
          </button>
        </mat-form-field>
      </div>
      <div class="hero-data-bar-refresh">
        <button
          mat-stroked-button
          color="primary"
          (click)="
            filterValue === 'Pending'
              ? getPendingProductApprovals()
              : getApprovedProducts()
          "
        >
          Refresh <mat-icon style="color: white">refresh</mat-icon>
        </button>
      </div>
    </div>
    <div class="hero-data-result">
      <mat-accordion multi="true" *ngIf="!dataLoading && !pageLoading">
        <div class="container-fluid" *ngIf="filterValue === 'Approved'">
          <div class="row" style="margin-left: 3%; margin-right: 3%">
            <div
              class="col-xs-6 col-md-4"
              *ngFor="let product of approvedProducts.rows"
            >
              <app-product-card-small
                [productDetails]="getProductCardDetails(product)"
                [cardHeight]="32"
                [cardWidth]="25"
                actionName="Open"
                actionIcon="open_in_full"
              ></app-product-card-small>
            </div>
          </div>
        </div>
        <div class="container-fluid" *ngIf="filterValue === 'Pending'">
          <div class="row" style="margin-left: 3%; margin-right: 3%">
            <div
              class="col-xs-6 col-md-4"
              *ngFor="let product of pendingProducts.rows"
            >
              <app-product-card-small
                [productDetails]="getProductCardDetails(product)"
                [cardHeight]="32"
                [cardWidth]="25"
                actionName="Open"
                actionIcon="open_in_full"
                (actionClick)="onProductClick($event)"
              ></app-product-card-small>
            </div>
          </div>
        </div>

        <div
          class="hero-data-result-null"
          *ngIf="totalApprovals === 0 && filterValue === 'Pending'"
        >
          No Approvals Found
        </div>
        <div
          class="hero-data-result-null"
          *ngIf="totalApprovals === 0 && filterValue === 'Approved'"
        >
          No Products Found
        </div>
      </mat-accordion>
      <mat-paginator
        [length]="totalApprovals"
        [pageSize]="approvalsPerPage"
        [pageSizeOptions]="pageSizeOptions"
        (page)="onPageChange($event)"
        *ngIf="!dataLoading && !pageLoading"
      ></mat-paginator>
      <mat-spinner
        style="margin: auto"
        *ngIf="dataLoading && !pageLoading"
      ></mat-spinner>
    </div>
  </div>
  <app-loader *ngIf="pageLoading"></app-loader>
</div>
